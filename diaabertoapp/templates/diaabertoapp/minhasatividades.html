<!DOCTYPE HTML> {% load static %}
<html lang="pt-pt">

<head>

    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="{% static 'diaabertoapp/bulma.css' %}">
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/4.5.95/css/materialdesignicons.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <link href="{% static 'diaabertoapp/favicon.ico' %}" rel="icon">
    <title>Minhas Atividades - Dia Aberto</title>
    <style>
        body,
        html {
            min-height: 100%;
            background-size: cover;
            background: linear-gradient(to bottom, #ffffff, #eeeeff) no-repeat fixed center center;
        }

        * {
            outline: none;
        }
        .footer{
          position: fixed;
          bottom: 0;
          width: 100%;
        }
        .menu-list a.is-active {
            background-color: white;
            color: black;
        }
        .notices{
            position: fixed;
            display: flex;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 8em;
            overflow: hidden;
            z-index: 1000;
            pointer-events: none;
        }


    </style>
</head>

<body>
    <div id="app">
        {% include "includes/navbar.html" %}
        <div data-v-8716d23a="" id="top-hero" class="hero is-primary is-bold">
            <div data-v-8716d23a="" id="top-hero-body" class="hero-body"></div>
        </div>
        {% if messages %}
            {% for message in messages %}
            <div id="message_container" class="notices is-bottom"><div role="alert" {% if message.tags == 'error' %} class="toast is-danger is-bottom" {% else %} class="toast is-success is-bottom" {% endif %} style=""><div>{{ message }}</div></div></div>
            {% endfor %}
        {% endif %}

        <div data-v-8716d23a="" id="page-content">
            <div data-v-8716d23a="" class="card" style="margin-bottom:6em">
                <div data-v-8716d23a="" class="card-content">
                    <div data-v-8716d23a="" class="columns">
                        <div class="column is-3">
                            <div>
                                <div class="menu" style="        margin-bottom: 1rem;">
                                    <p class="menu-label">Filtros Atividade</p>
                                    <ul class="menu-list">
                                        <form method="GET" action=".">                                           
                                         {% if utilizador.utilizadortipo.tipo != 'Coordenador' and utilizador.utilizadortipo.tipo != 'Docente' %}
                                            <div class="field has-addons">
                                           
                                            <!---->
                                            {% if not campusquery|length > 0 %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="campusSearch" name="campus"><!--onchange="searchByType()"-->
                                                        <option disabled="disabled" hidden="hidden" selected>
                                                            Campus
                                                        </option>
                                                        {% for Campus in campuss %}
                                                            <option value="{{ Campus.id }}">{{ Campus.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <div class="control">
                                                <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                            </div>
                                            {% else %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="campusSearch" name="campus"><!--onchange="searchByType()"-->
                                                        {% for Campus in campuss %}
                                                            <option value="{{ Campus.id }}">{{ Campus.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <!---->
                                            <div class="control">
                                                <button class="button is-danger" onclick="document.getElementById('campusSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                              </div>
                                            {% endif %}
                                        </div>
                                        <div class="field has-addons">
                                            <!---->
                                            {% if not organicaquery|length > 0 %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="organicaSearch" name="unidadeorganica"><!--onchange="searchByType()"-->
                                                        <option disabled="disabled" hidden="hidden" selected>
                                                            Unidade Orgânica
                                                        </option>
                                                        {% for organica in organicas %}
                                                            <option value="{{ organica.id }}">{{ organica.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <div class="control">
                                                <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                            </div>
                                            {% else %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="organicaSearch" name="unidadeorganica"><!--onchange="searchByType()"-->
                                                        {% for organica in organicas %}
                                                            <option value="{{ organica.id }}">{{ organica.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <!---->
                                            <div class="control">
                                                <button class="button is-danger" onclick="document.getElementById('organicaSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                              </div>
                                            {% endif %}
                                        </div>
                                        <div class="field has-addons">
                                            <!---->
                                            {% if not departamentoquery|length > 0 %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="departamentoSearch" name="departamento"><!--onchange="searchByType()"-->
                                                        <option disabled="disabled" hidden="hidden" selected>
                                                            Departamento
                                                        </option>
                                                        {% for Departamento in departamentos %}
                                                            <option value="{{ Departamento.id }}">{{ Departamento.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <div class="control">
                                                <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                            </div>
                                            {% else %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="departamentoSearch" name="departamento"><!--onchange="searchByType()"-->
                                                        {% for Departamento in departamentos %}
                                                            <option value="{{ Departamento.id }}">{{ Departamento.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <!---->
                                            <div class="control">
                                                <button class="button is-danger" onclick="document.getElementById('departamentoSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                              </div>
                                            {% endif %}
                                        </div>
                                        {% endif %}
                                        <div class="field has-addons">
                                            <!---->
                                            {% if not tematicaquery|length > 0 %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="tematicaSearch" name="tematica"><!--onchange="searchByType()"-->
                                                        <option disabled="disabled" hidden="hidden" selected>
                                                            Tema
                                                        </option>
                                                        {% for Tematica in tematicas %}
                                                            <option value="{{ Tematica.id }}">{{ Tematica.tema }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <div class="control">
                                                <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                            </div>
                                            {% else %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="tematicaSearch" name="tematica"><!--onchange="searchByType()"-->
                                                        {% for Tematica in tematicas %}
                                                            <option value="{{ Tematica.id }}">{{ Tematica.tema }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <!---->
                                            <div class="control">
                                                <button class="button is-danger" onclick="document.getElementById('tematicaSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                              </div>
                                            {% endif %}
                                        </div>
                                        <div class="field has-addons">
                                            <!---->
                                            {% if not publicoquery|length > 0 %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="publicoSearch" name="publico_alvo"><!--onchange="searchByType()"-->
                                                        <option disabled="disabled" hidden="hidden" selected>
                                                            Público-alvo
                                                        </option>
                                                        {% for Publico in publicoalvo %}
                                                            <option value="{{ Publico.id }}">{{ Publico.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <div class="control">
                                                <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                            </div>
                                            {% else %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="publicoSearch" name="publico_alvo"><!--onchange="searchByType()"-->
                                                        {% for Publico in publicoalvo %}
                                                            <option value="{{ Publico.id }}">{{ Publico.nome }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </span>
                                                <!--<span class="icon is-left">
                                                    <i class="mdi mdi-magnify mdi-24px"></i>
                                                </span>-->
                                            </div>
                                            <!---->
                                            <div class="control">
                                                <button class="button is-danger" onclick="document.getElementById('publicoSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                            </div>
                                            {% endif %}
                                        </div>
                                        <div class="field has-addons">
                                        <!---->
                                        {% if not tipo_query|length > 0 %}
                                            <div class="control is-expanded ">
                                                <span class="select is-fullwidth is-empty">
                                                    <select  id="tipoSearch" name="tipo"><!--onchange="searchByType()"-->
                                                        <option disabled="disabled" hidden="hidden" selected>
                                                        Tipo de atividade
                                                        </option>
                                                    {% for Tipo in tipoatividade %}
                                                        <option value="{{ Tipo.id }}">{{ Tipo.tipo }}</option>
                                                    {% endfor %}
                                                    </select>
                                                </span>
                                            <!--<span class="icon is-left">
                                            <i class="mdi mdi-magnify mdi-24px"></i>
                                            </span>-->
                                            </div>
                                            <div class="control">
                                                <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                            </div>
                                        {% else %}
                                        <div class="control is-expanded ">
                                            <span class="select is-fullwidth is-empty">
                                                <select  id="tipoSearch" name="tipo"><!--onchange="searchByType()"-->
                                                    {% for Tipo in tipoatividade %}
                                                        <option value="{{ Tipo.id }}">{{ Tipo.tipo }}</option>
                                                    {% endfor %}
                                                </select>
                                            </span>
                                            <!--<span class="icon is-left">
                                                <i class="mdi mdi-magnify mdi-24px"></i>
                                            </span>-->
                                        </div>
                                        <!---->
                                        <div class="control">
                                            <button class="button is-danger" onclick="document.getElementById('tipoSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                            </div>
                                        {% endif %}
                                        </div>
                                        <div class="field has-addons">
                                            <!---->
                                            {% if not nomesquery|length > 0 %}
                                            <div class="control is-expanded">
                                                <div class="control is-clearfix">
                                                    <input type="search" autocomplete="off" id="nameSearch" name="nome"  placeholder="Nome da Atividade" class="input"><!--onkeyup="searchByName()"-->
                                                    <!--<span class="icon is-left">
                                                        <i class="mdi mdi-magnify mdi-24px"></i>
                                                    </span>-->
                                                    <!---->
                                                    <!---->
                                                </div>
                                            </div>
                                            <div class="control">
                                                <button type="submit" class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                            </div>
                                            {% else %}
                                            <div class="control is-expanded">
                                                <div class="control is-clearfix">
                                                <input type="text" autocomplete="off" id="nameSearch" name="nome"  placeholder="Nome da Atividade" class="input" value="{{ nomesquery }}"><!--onkeyup="searchByName()"-->
                                                    <!--<span class="icon is-left">
                                                        <i class="mdi mdi-magnify mdi-24px"></i>
                                                    </span>-->
                                                    <!---->
                                                    <!---->
                                                </div> 
                                            </div>
                                            <div class="control">
                                                <button class="button is-danger" onclick="document.getElementById('nameSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                            </div>
                                        {% endif %}
                                            <!---->
                                        </div>
                                            <div class="field has-addons">
                                                <!---->
                                                {% if not estadosquery|length > 0 %}
                                                <div class="control is-expanded">
                                                    <span class="select is-fullwidth is-empty">
                                                        <select id="validationSearch" name="validada"><!--onchange="searchByValidation()"-->
                                                            <option disabled="disabled" hidden="hidden" selected>
                                                                Estado
                                                            </option>
                                                            {% for Estado in estados %}
                                                                <option value="{{ Estado.validada }}">{{ Estado.get_validada_display }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </span>
                                               
                                                </div>
                                                <div class="control">
                                                    <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                                </div>
                                                <!---->
                                                {% else %}
                                                <div class="control is-expanded">
                                                    <span class="select is-fullwidth is-empty">
                                                        <select id="validationSearch"><!--onchange="searchByValidation()"-->
                                                            {% for Estado in estados %}
                                                                <option value="{{ Estado.get_validada_display }}" selected>{{ Estado.get_validada_display }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </span>
                                                
                                                </div>
                                                <div class="control">
                                                    <button class="button is-danger" onclick="document.getElementById('validationSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                                </div>
                                                {% endif %}
                                            </div>
                                    </form>
                                 </ul>
                                </div>
                                <div class="menu">
                                    <p class="menu-label">Filtros Sessão</p>
                                    <ul class="menu-list">
                                        <form method="GET" action=".">
                                            <div class="field has-addons">
                                                <!---->
                                                {% if not diaquery|length > 0 %}
                                                <div class="control is-expanded has-icons-left">
                                                    <span class="select is-fullwidth is-empty">
                                                        <select id="diasSearch" name="dias"><!--onchange="searchByValidation()"-->
                                                            <option disabled="disabled" hidden="hidden" selected>
                                                                Dia
                                                            </option>
                                                            {% for Dia in dias %}
                                                                <option value="{{ Dia|date:"Y-m-d" }}">{{ Dia|date:"d-m-Y" }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </span>
                                                <span class="icon is-small is-left">
                                                    <i class="mdi mdi-calendar"></i>
                                                 </span>
                                                </div>
                                                <div class="control">
                                                    <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                                </div>
                                                <!---->
                                                {% else %}
                                                <div class="control is-expanded has-icons-left">
                                                    <span class="select is-fullwidth is-empty">
                                                        <select id="diasSearch" name="dias"><!--onchange="searchByValidation()"-->
                                                            {% for Dia in dias %}
                                                                <option value="{{ Dia|date:"Y-m-d" }}">{{ Dia|date:"d-m-Y" }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </span>
                                                <span class="icon is-small is-left">
                                                    <i class="mdi mdi-calendar"></i>
                                                </span>
                                                </div>
                                                <div class="control">
                                                    <button class="button is-danger" onclick="document.getElementById('diasSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                                </div>
                                                {% endif %}
                                            </div>
                                            <div class="field has-addons">
                                                <!---->
                                                {% if not sessoesquery|length > 0 %}
                                                <div class="control is-expanded has-icons-left">
                                                    <span class="select is-fullwidth is-empty">
                                                        <select id="sessaoSearch" name="sessao"><!--onchange="searchByValidation()"-->
                                                            <option disabled="disabled" hidden="hidden" selected>
                                                                Sessão
                                                            </option>
                                                            {% for Sessao in sessoes %}
                                                                <option value="{{ Sessao.id }}">{{ Sessao.hora|time:"H:i" }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </span>
                                                <span class="icon is-small is-left">
                                                    <i class="mdi mdi-clock"></i>
                                                 </span>
                                                </div>
                                                <div class="control">
                                                    <button class="button is-primary"> <i class="mdi mdi-magnify mdi-12px"></i></button>
                                                </div>
                                                <!---->
                                                {% else %}
                                                <div class="control is-expanded has-icons-left">
                                                    <span class="select is-fullwidth is-empty">
                                                        <select id="sessaoSearch" name="sessao"><!--onchange="searchByValidation()"-->
                                                            {% for Sessao in sessoes %}
                                                                <option value="{{ Sessao.id }}">{{ Sessao.hora|time:"H:i" }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </span>
                                                <span class="icon is-small is-left">
                                                    <i class="mdi mdi-clock"></i>
                                                </span>
                                                </div>
                                                <div class="control">
                                                    <button class="button is-danger" onclick="document.getElementById('sessaoSearch').value = ''"> <i class="mdi mdi-close mdi-12px"></i></button>
                                                </div>
                                                {% endif %}
                                            </div>
                                        </form>

                                </ul>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <nav aria-label="breadcrumbs" class="breadcrumb">
                                <ul>
                                    <li>
                                        <a href="/" class="router-link-active">Início</a>
                                    </li>
                                    <li class="is-active">
                                        <a href="/minhasatividades" class="router-link-exact-active router-link-active">Minhas Atividades</a>
                                    </li>
                                </ul>
                            </nav>
                           
                            {% if user.is_authenticated and utilizador.utilizadortipo.tipo == 'Docente' %}
                            <a href="/minhasatividades/propor" class="button is-success is-outlined" type="button" style="        margin-bottom: 0.5rem;">
                                <span class="icon is-small">
                                    <i class="mdi mdi-plus"></i>
                                </span>
                                <span>Propor nova atividade</span>
                                <!---->
                            </a>
                            {% endif %}
                            <div>
<!------------------------------------------------------------------------------------------------------------------Inicio de Tabela------------------------------------------------------------------------------------------------------------>

                                <div class="b-table ">
                                    <div class="field table-mobile-sort">
                                        <div class="field has-addons">
                                            <div class="control is-expanded">
                                                <span class="select is-fullwidth">
                                                    <select>
                                                        <!---->
                                                        <!---->
                                                        <option value="[object Object]">
                                                            Nome
                                                        </option>
                                                        <option value="[object Object]">
                                                            Submetido a
                                                        </option>
                                                        <option value="[object Object]">
                                                            Responsável
                                                        </option>
                                                        <option value="[object Object]">
                                                            Estado
                                                        </option>
                                                    </select>
                                                </span>
                                                <!---->
                                            </div>
                                            <div class="control">
                                                <button class="button is-primary">
                                                    <span class="icon is-small">
                                                        <i class="mdi mdi-sort"></i>
                                                    </span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <!---->
                                    <br />
                                    <div class="table-wrapper">
                                        <table id="activitiesTable" class="table has-mobile-cards is-hoverable">
                                            <thead>
                                                <tr>
                                                    <th width="40px"></th>
                                                    <!---->
                                                    <th class="is-sortable" style="width: 300px;" >
                                                        {% if order_by == 'nome' and sort == 'asc' %}
                                                            <a href="?order_by=nome&sort=desc">
                                                                <div class="th-wrap">Nome
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-up"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% elif order_by == 'nome' and sort == 'desc' %}
                                                            <a href="?order_by=nome&sort=asc">
                                                                <div class="th-wrap">Nome
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-down"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% else %}
                                                            <a href="?order_by=nome&sort=asc" style="color: black">
                                                                <div class="th-wrap">Nome
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-swap"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% endif %}
                                                    </th>
                                                    <th class="is-sortable">
                                                        {% if order_by == 'data' and sort == 'asc' %}
                                                            <a href="?order_by=data&sort=desc">
                                                                <div class="th-wrap">Submetido a
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-up"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% elif order_by == 'data' and sort == 'desc' %}
                                                            <a href="?order_by=data&sort=asc">
                                                                <div class="th-wrap">Submetido a
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-down"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% else %}
                                                            <a href="?order_by=data&sort=asc" style="color: black">
                                                                <div class="th-wrap">Submetido a
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-swap"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% endif %}
                                                    </th>
                                                    <th class="is-sortable">
                                                        {% if order_by == 'responsavel' and sort == 'asc' %}
                                                            <a href="?order_by=responsavel&sort=desc">
                                                                <div class="th-wrap">Responsável
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-up"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% elif order_by == 'responsavel' and sort == 'desc' %}
                                                            <a href="?order_by=responsavel&sort=asc">
                                                                <div class="th-wrap">Responsável
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-down"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% else %}
                                                            <a href="?order_by=responsavel&sort=asc" style="color: black">
                                                                <div class="th-wrap">Responsável
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-swap"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% endif %}
                                                    </th>
                                                    <th class="is-sortable">
                                                        {% if order_by == 'validada' and sort == 'asc' %}
                                                            <a href="?order_by=validada&sort=desc">
                                                                <div class="th-wrap">Estado
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-up"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% elif order_by == 'validada' and sort == 'desc' %}
                                                            <a href="?order_by=validada&sort=asc">
                                                                <div class="th-wrap">Estado
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-down"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% else %}
                                                            <a href="?order_by=validada&sort=asc" style="color: black">
                                                                <div class="th-wrap">Estado
                                                                    <span class="icon is-small">
                                                                        <i class="mdi mdi-menu-swap"></i>
                                                                    </span>
                                                                </div>
                                                            </a>
                                                        {% endif %}
                                                    </th>
                                                    <!---->
                                                </tr>
                                                <!---->
                                                <!---->
                                            </thead>
                                            <tbody>
                                                {% for Atividade in atividades %}
                                                <tr draggable="false" class="header">
                                                    <td class="chevron-cell">
                                                        <a class="collapsible">
                                                            <span class="icon">
                                                                <i class="mdi mdi-chevron-right mdi-24px"></i>
                                                            </span>
                                                        </a>
                                                    </td>
                                                    <!---->
                                                    <td data-label="Nome" id="activityName" class=""> {{ Atividade.nome }} </td>
                                                    <td data-label="Submetido a" class=""> {{ Atividade.data|date:'d-m-Y' }} </td>
                                                    <td data-label="Responsável" class=""> {{ Atividade.responsavel }} </td>
                                                    <td data-label="Estado" class="">
                                                        <span class="tag text {% if Atividade.validada  == "RJ" %}
              is-danger {% endif %} {% if Atividade.validada  == "PD" %} is-warning {% endif %} {% if Atividade.validada  == "VD" %} is-success {% endif %}" style="width: 7rem;font-size: small;"> {{ Atividade.get_validada_display }} </span>
                                                    </td>
                                                    <!---->
                                                </tr>
                                                <!---->
                                                <tr class="detail" style="display:none">
                                                    <td colspan="5">
                                                        
                    <div class="content">
                        <div class="section" style="font-size: 15px;">
                            <div class="columns">
                                <div class="column">
                                    <p><strong>Nome: </strong> {{ Atividade.nome }} </p>
                                    <p><strong>Descrição:</strong> {{ Atividade.descricao }} </p>
                                    <p><strong>Tipo de Atividade:</strong> {{ Atividade.tipo_atividade }} </p>      
                                </div>
                                <div class="column">
                                    <p><strong>Unidade Orgânica:</strong> {{ Atividade.unidadeorganica }} </p>
                                    <p><strong>Departamento:</strong> {{ Atividade.departamento }} </p>
                                    {% if Atividade.campus or Atividade.edificio or Atividade.sala %}
                                        {% if Atividade.campus %}        
                                            <p><strong>Campus:</strong> {{ Atividade.campus }} </p>
                                        {% endif %}
                                        {% if Atividade.campus and not Atividade.edificio and not Atividade.sala %}        
                                            {% if Atividade.campus.mapa_imagem %}                
                                                <p><a id="open-modal" onclick="srcImage('{{ Atividade.campus.mapa_imagem.url }}')"><small>Ver no mapa<i class="mdi mdi-open-in-new"></i></small></a></p>
                                            {% endif %}            
                                        {% endif %}
                                        {% if Atividade.edificio and Atividade.sala  %}
                                            <p><strong>Edificio:</strong> {{ Atividade.edificio }} </p>
                                        {% endif %}
                                        {% if Atividade.edificio and not Atividade.sala %}
                                            <p  style="margin-bottom:0px"><strong>Edificio:</strong> {{ Atividade.edificio }} </p>
                                            {% if Atividade.edificio.mapa_imagem %}
                                                <p><a id="open-modal" onclick="srcImage('{{ Atividade.edificio.mapa_imagem.url }}')"><small>Ver no mapa<i class="mdi mdi-open-in-new"></i></small></a></p>
                                            {% endif %}            
                                        {% endif %}
                                        {% if Atividade.sala %}
                                            <p style="margin-bottom:0px"><strong>Sala:</strong> {{ Atividade.sala }}</p>
                                            {% if Atividade.sala.mapa_imagem %}
                                                <p><a id="open-modal" onclick="srcImage('{{ Atividade.sala.mapa_imagem.url }}')"><small>Ver no mapa<i class="mdi mdi-open-in-new"></i></small></a></p>
                                            {% endif %}
                                        {% endif %}
                                    {% elif Atividade.tipo_local %}
                                        <p><strong>Local:</strong> {{ Atividade.tipo_local }}</p>
                                    {% else %}
                                        <p><strong>Local:</strong> Não especificado</p>
                                    {% endif %}

                                </div>
                                <div class="column">
                        
                                            <p><strong>Temáticas:</strong> 
                                            {% for tema in Atividade.tematicas.all %}
                                                {{ tema }};           
                                            {% endfor %}
                                            </p>
                                            <p><strong>Público-alvo:</strong>
                                            {% for alvo in Atividade.publico_alvo.all %}
                                                {{ alvo }};           
                                            {% endfor %}
                                            </p>
                                            <p><strong>Responsável:</strong> {{ Atividade.responsavel }} </p>
                                            <p><strong>Data de submissão:</strong> {{ Atividade.data|date:'d-m-Y' }} </p>
                                            <p><strong>Estado de submissão:</strong> {{ Atividade.get_validada_display }} </p>
                                </div>
                            </div>
        

        
        {% for Mat in materiais %}
        {%if Mat.atividade.id == Atividade.id > 0 %}
        {% ifchanged %}
                            <p><strong>Materiais:</strong></p>
                                <div class="b-table">
                                <!---->
                                <!---->
                                <div class="table-wrapper">
                                    <table class="table has-mobile-cards">
                                        <thead>
                                            <tr>
                                                <!---->
                                                <!---->
                                                <th class="">
                                                    <div class="th-wrap">Material
                                                        <span class="icon is-small" style="display: none;">
                                                            <i class="mdi mdi-arrow-up"></i>
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="">
                                                    <div class="th-wrap">Quantidade
                                                        <span class="icon is-small" style="display: none;">
                                                            <i class="mdi mdi-arrow-up"></i>
                                                        </span>
                                                    </div>
                                                </th>
                                                <!---->
                                            </tr>
                                            <!---->
                                            <!---->
                                        </thead>
                                        <tbody>
            {% endifchanged %}
            {% endif %}
            {% endfor %}
            {% for Mat in materiais %}
                {% ifequal Mat.atividade.id Atividade.id %}
                                            <tr draggable="false">
                                                <td data-label="Material" class=""> {{ Mat.material }} </td>
                                                <td data-label="Hora" class=""> {{ Mat.quantidade }} </td>
                                            </tr>
                {% endifequal %}
            {% endfor %}
            {% for Mat in materiais %}
            {%if Mat.atividade.id == Atividade.id > 0 %}
            {% ifchanged %}
                                        </tbody>
                                        <!---->
                                    </table>
                                </div>
                                <!---->
                            </div>
            {% endifchanged %}
            {% endif %}
            {% endfor %}

        <br />
        <p><strong>Sessões:</strong></p>
        <div class="b-table">
            <!---->
            <!---->
            <div class="table-wrapper">
                <table class="table has-mobile-cards">
                    <thead>
                        <tr>
                            <!---->
                            <!---->
                            <th class="">
                                <div class="th-wrap">Dia
                                    <span class="icon is-small" style="display: none;">
                                        <i class="mdi mdi-arrow-up"></i>
                                    </span>
                                </div>
                            </th>
                            <th class="">
                                <div class="th-wrap">Hora
                                    <span class="icon is-small" style="display: none;">
                                        <i class="mdi mdi-arrow-up"></i>
                                    </span>
                                </div>
                            </th>
                            <th class="">
                                <div class="th-wrap">Duração
                                    <span class="icon is-small" style="display: none;">
                                        <i class="mdi mdi-arrow-up"></i>
                                    </span>
                                </div>
                            </th>
                            <th class="">
                                <div class="th-wrap">Máximo de participantes
                                    <span class="icon is-small" style="display: none;">
                                        <i class="mdi mdi-arrow-up"></i>
                                    </span>
                                </div>
                            </th>
                            <th class="">
                                <div class="th-wrap">Vagas
                                    <span class="icon is-small" style="display: none;">
                                        <i class="mdi mdi-arrow-up"></i>
                                    </span>
                                </div>
                            </th>
                            <th class="">
                                <div class="th-wrap">Número de Colaboradores
                                    <span class="icon is-small" style="display: none;">
                                        <i class="mdi mdi-arrow-up"></i>
                                    </span>
                                </div>
                            </th>
                            <!---->
                        </tr>
                        <!---->
                        <!---->
                    </thead>
                    <tbody>
                        <!---->
                        {% for Sessao in sessoesatividade %}
                            {% ifequal Sessao.atividade.id Atividade.id %}
                            <tr draggable="false" class="">
                                <!---->
                                <td data-label="Dia" class=""> {{ Sessao.dia|date:"d-m-Y" }} </td>
                                <td data-label="Hora" class=""> {{ Sessao.sessao.hora|time:"H:i" }} </td>
                                <td data-label="Duração" class=""> {{ Sessao.atividade.duracao }} minutos</td>
                                <td data-label="Máximo de participantes" class=""> {{ Sessao.atividade.limite_participantes }} </td>
                                <td data-label="Vagas" class=""> {{ Sessao.n_alunos }} </td>
                                <td data-label="Número de Colaboradores" class=""> {{ Sessao.numero_colaboradores }} </td>
                                <!---->
                            </tr>
                            {% endifequal %}
                        {% endfor %}
                        <!---->
                    </tbody>
                    <!---->
                </table>
            </div>
            <!---->
        </div>
    </div>
    <hr />
    <div class="" style="margin-top: 13px;">
        <div class="level">
            <div class="level-left">
                <div class="level-item">
                    {% if user.is_authenticated and utilizador.utilizadortipo.tipo == 'Coordenador' and Atividade.validada != 'VD'%}
                        <form action="{% url 'aceitaratividade' Atividade.id %}" method=POST>
                            {% csrf_token %}
                            <button type="submit" class="button is-success" style="margin-right: 10px;" onclick="return confirm('Tem a certeza que prentede aceitar a proposta?');">
                                <span class="icon is-small">
                                    <i class="mdi mdi-check"></i>
                                </span>
                                <span>Aceitar</span>
                                <!---->
                            </button>
                        </form>
                    {% endif %}
                </div>
                <div class="level-item">
                    {% if user.is_authenticated and utilizador.utilizadortipo.tipo == 'Coordenador' and Atividade.validada != 'RJ' %}
                        <form action="{% url 'rejeitaratividade' Atividade.id %}" method=POST>
                            {% csrf_token %}
                            <button type="submit" class="button is-danger" style="margin-right: 10px;" onclick="return confirm('Tem a certeza que prentede rejeitar a proposta?');">
                                <span class="icon is-small">
                                    <i class="mdi mdi-window-close"></i>
                                </span>
                                <span>Rejeitar</span>
                                <!---->
                            </button>
                        </form>
                    {% elif user.is_authenticated and utilizador.utilizadortipo.tipo == 'Coordenador' and Atividade.validada == 'RJ' %}
                        <form action="{% url 'sugeriralteracao' Atividade.id %}" method=POST>
                            {% csrf_token %}
                            <button type="submit" class="button is-info" style="margin-right: 10px;">
                                <span class="icon is-small">
                                    <i class="mdi mdi-pencil"></i>
                                </span>
                                <span>Sugerir alteração</span>
                                <!---->
                            </button>
                        </form>
                    {% endif %}
                </div>
                
                    {% for Sessao in sessoesatividade %}
                            {% ifequal Sessao.atividade.id Atividade.id %}
                                {% if Sessao.n_alunos != Atividade.limite_participantes %}
                                    {% ifchanged %}
                                        <div class="level-item">
                                            {% if user.is_authenticated and utilizador.utilizadortipo.tipo == 'Docente'%}
                                                <span class="tag is-warning">Esta atividade já se encontra com utilizadores inscritos!</span>
                                            {% endif %}
                                        </div>
                                    {% endifchanged %}
                                {% else %}
                                    {% ifchanged %}
                                        <div class="level-item">
                                            {% if user.is_authenticated and utilizador.utilizadortipo.tipo == 'Docente' %}
                                                <a class="button is-info" href="{% url 'alteraratividade' Atividade.id %}"><i class="mdi mdi-pencil">&nbsp;</i> Editar</a>
                                            {% endif %}
                                        </div>
                                        <div class="level-item">
                                            {% if user.is_authenticated and utilizador.utilizadortipo.tipo == 'Docente' %}
                                                <form action="{% url 'eliminaratividade' Atividade.id %}" method=POST>
                                                    {% csrf_token %}
                                                    <button type="submit" class="button is-danger" style="margin-right: 10px;" onclick="return confirm('Tem a certeza que prentede eliminar a atividade?');">
                                                        <span class="icon is-small">
                                                            <i class="mdi mdi-delete"></i>
                                                        </span>
                                                        <span>Eliminar</span>
                                                    </button>
                                                </form>
                                            {% endif %}
                                        </div>
                                    {% endifchanged %}
                                {% endif %}
                            {% endifequal %}
                        {% endfor %}
                    
                 
                
            </div>
            <div class="level-right">
                
                
            </div>
        </div>
    </div>
</div>
                                                    </td>
                                                </tr>
                                                <!---->
                                                {% endfor %}
                                            </tbody>

                                            <!---->
                                        </table>
                                    </div>
                                    {% if atividades.has_other_pages %}
                                    <div class="level">
                                        <div class="level-left"></div>
                                        <div class="level-right">
                                            <div class="level-item">
                                                <nav class="pagination">
                                                    {% if atividades.has_previous %}
                                                        {% if order_by is not None %}
                                                            <a role="button" href="?page={{ atividades.previous_page_number }}&order_by={{ order_by }}&sort={{ sort }}" class="pagination-link pagination-previous">
                                                            <span class="icon" aria-hidden="true">
                                                                    <i class="mdi mdi-chevron-left mdi-24px"></i>
                                                                </span>
                                                            </a>
                                                        {% else %}
                                                            <a role="button" href="?page={{ atividades.previous_page_number }}" class="pagination-link pagination-previous">
                                                            <span class="icon" aria-hidden="true">
                                                                    <i class="mdi mdi-chevron-left mdi-24px"></i>
                                                                </span>
                                                            </a>
                                                        {% endif %}
                                                    {% else %}
                                                    <a role="button" href="#" disabled="disabled" class="pagination-link pagination-previous">
                                                        <span class="icon" aria-hidden="true">
                                                            <i class="mdi mdi-chevron-left mdi-24px"></i>
                                                        </span>
                                                    </a>
                                                    {% endif %}
                                                    {% if atividades.has_next %}
                                                        {% if order_by is not None %}
                                                            <a role="button" href="?page={{ atividades.next_page_number }}&order_by={{ order_by }}&sort={{ sort }}" class="pagination-link pagination-next">
                                                                <span class="icon" aria-hidden="true">
                                                                    <i class="mdi mdi-chevron-right mdi-24px"></i>
                                                                </span>
                                                            </a>
                                                        {% else %}
                                                            <a role="button" href="?page={{ atividades.next_page_number }}" class="pagination-link pagination-next">
                                                                <span class="icon" aria-hidden="true">
                                                                    <i class="mdi mdi-chevron-right mdi-24px"></i>
                                                                </span>
                                                            </a>
                                                        {% endif %}
                                                    {% else %}
                                                    <a role="button" href="#" disabled="disabled" class="pagination-link pagination-next">
                                                        <span class="icon" aria-hidden="true">
                                                            <i class="mdi mdi-chevron-right mdi-24px"></i>
                                                        </span>
                                                    </a>
                                                    {% endif %}
                                                    <ul class="pagination-list">
                                                        <!---->
                                                        <!---->
                                                        {% for i in atividades.paginator.page_range %}
                                                        {% if atividades.number == i %}
                                                        <li>
                                                            <a role="button" href="#" aria-current="true" class="pagination-link is-current ">{{ i }}</a>
                                                        </li>
                                                        {% else %}
                                                        {% if order_by is not None %}
                                                        <li>
                                                            <a role="button" href="?page={{ i }}&order_by={{ order_by }}&sort={{ sort }}" aria-current="true" class="pagination-link ">{{ i }}</a>
                                                        </li>
                                                        {% else %}
                                                        <li>
                                                            <a role="button" href="?page={{ i }}" aria-current="true" class="pagination-link ">{{ i }}</a>
                                                        </li>
                                                        {% endif %}
                                                        {% endif %}
                                                        {% endfor %}
                                                        <!---->
                                                        <!---->
                                                    </ul>
                                                </nav>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                                </div>
<!------------------------------------------------------------------------------------------------------------------Fim de Tabela------------------------------------------------------------------------------------------------------------>
                                
                            <!---------------------------------------------------------------------------------------Outra Tabela------------------------------------------------------------------------------------------------>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        <footer class="footer">
            <div data-v-8716d23a="" style="float: left;"> © 2020 Universidade do Algarve </div>
            <div data-v-8716d23a="" style="float: right;"> Made by Grupo 9 </div>
            <div data-v-8716d23a="" style="margin: auto; width: max-content;"> Dia Aberto da Universidade do Algarve </div>
        </footer>
    <!---------------------------------------------------------------------------------------Inicio do Modal------------------------------------------------------------------------------------------------>
        <div class="modal">
          <div class="modal-background">
          </div>
          <div class="modal-content has-text-centered">   
              <img id="modalImage" src="{% static 'diaabertoapp/maps/default.png' %}" alt="">
          </div>
          <button id="close-modal" class="modal-close is-large" aria-label="close"></button>
        </div>
    <!---------------------------------------------------------------------------------------Fim do Modal------------------------------------------------------------------------------------------------>
    <script src="https://unpkg.com/vue"></script>
    <!-- Full bundle -->
    <script src="https://unpkg.com/buefy/dist/buefy.min.js"></script>

    <!-- Individual components -->
    <script src="https://unpkg.com/buefy/dist/components/table"></script>
    <script src="https://unpkg.com/buefy/dist/components/input"></script>

    <script>
        $(document).ready(function () {
            $('tr.header').click(function () {
                //$(this).find('span').find('i').toggleClass('fa-thumbs-down');
                if ($(this).find('span').find('i').hasClass('mdi mdi-chevron-right mdi-24px')) {
                    $(this).find('span').find('i').removeClass("mdi mdi-chevron-right mdi-24px").addClass("mdi mdi-chevron-down mdi-24px");
                  }else{
                       $(this).find('span').find('i').removeClass("mdi mdi-chevron-down mdi-24px").addClass("mdi mdi-chevron-right mdi-24px");
                  }
                $(this).nextUntil('tr.header').slideToggle(100, function(){
                    });
            });
        });
    </script>
    <script>
        new Vue({
            el: '#app'
        })
    </script>
    <script>
        // suppose the `id` attribute of element is `message_container`.
        var message_ele = document.getElementById("message_container");

        setTimeout(function(){ 
           message_ele.style.display = "none"; 
        }, 4000);
        // Timeout is 3 sec, you can change it

    </script>

        <script>
                function srcImage(p1){
                
                    event.preventDefault();
                    var modal = document.querySelector('.modal');  // assuming you have only 1
                    var html = document.querySelector('html');
                    var modalcontent = document.querySelector('#modalImage');            
                    modal.classList.add('is-active');
                    html.classList.add('is-clipped');
                    /*modalcontent.src="{% static "+p1+" %}";*/
                    modalcontent.src=p1;
                    modal.querySelector('button#close-modal').addEventListener('click', function(e) {
                        e.preventDefault();
                        modal.classList.remove('is-active');
                        html.classList.remove('is-clipped');
                    });

                };
        </script>
</body>

</html>