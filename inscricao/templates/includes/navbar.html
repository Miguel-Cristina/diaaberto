{% load static %}
<script src="{% static 'diaabertoapp/dist/bulma.js' %}"></script>
<nav data-v-a67fe1ba="" data-v-8716d23a="" role="navigation" aria-label="main navigation" class="navbar">
    <div class="navbar-brand">
        <a data-v-a67fe1ba="" href="/" class="navbar-item logo router-link-active">
            <img data-v-a67fe1ba="" alt="Dia Aberto" src="{% static "diaabertoapp/img/logo-navbar.png" %}">
        </a>
        <a role="button" aria-label="menu" class="navbar-burger burger">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>
    <div class="navbar-menu">
        <div class="navbar-start">
            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link">
                    Atividades
                </a>
                <div class="navbar-dropdown">
                    {% if utilizador.utilizadortipo.tipo == 'Administrador' or utilizador.utilizadortipo.tipo == 'Coordenador' or utilizador.utilizadortipo.tipo == 'Docente' %}
                        <a data-v-a67fe1ba="" href="/minhasatividades" class="navbar-item is-tab router-link"> Minhas
                            Atividades </a>
                    {% endif %}
                    <a data-v-a67fe1ba="" href="/consultaratividades" class="navbar-item is-tab router-link">Consultar
                        Atividades</a>

                </div>
            </div>
            {% if utilizador.utilizadortipo.tipo == 'Coordenador' or utilizador.utilizadortipo.tipo == 'Administrador' %}
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        Tarefas
                    </a>
                    <div class="navbar-dropdown">
                        {% if utilizador.utilizadortipo.tipo == 'Administrador' or utilizador.utilizadortipo.tipo == 'Coordenador' or utilizador.utilizadortipo.tipo == 'Colaborador' %}
                            <a data-v-a67fe1ba="" href="/tarefas" class="navbar-item is-tab router-link"> Minhas
                                Tarefas </a>
                        {% endif %}

                    </div>
                </div>
            {% endif %}
            {% if utilizador.utilizadortipo.tipo == 'Administrador' %}
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        Transportes
                    </a>
                    <div class="navbar-dropdown">
                        <a data-v-a67fe1ba="" href="/transportes" class="navbar-item is-tab router-link"> Meus
                            Transportes </a>
                        <a data-v-a67fe1ba="" href="/visualizartransporteinscricao" class="navbar-item is-tab router-link"> Inscricoes-Transportes </a>
                    </div>
                </div>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        Almocos
                    </a>
                    <div class="navbar-dropdown">
                        <a data-v-a67fe1ba="" href="/almocos" class="navbar-item is-tab router-link"> Meus
                            Almocos </a>
                    </div>
                </div>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        Gestão de Configurações
                    </a>
                    <div class="navbar-dropdown">
                        <a data-v-a67fe1ba="" href="/configuraratividades" class="navbar-item is-tab">Configuração das
                            Atividades</a>
                        <a data-v-a67fe1ba="" href="/configurarespacos" class="navbar-item is-tab"> Configuração dos
                            Espaços </a>
                        <a data-v-a67fe1ba="" href="/configurarorganicasdepartamentos" class="navbar-item is-tab ">
                            Configuração das Unidades Orgânicas e Departamentos </a>
                        <a data-v-a67fe1ba="" href="/configurartransporte"
                           class="navbar-item is-tab router-link-exact-active router-link-active">Configuração dos
                            Transportes</a>
                        <a data-v-a67fe1ba="" href="/configurarpercurso" class="navbar-item is-tab">Configuração dos
                            Percursos</a>
                        <a data-v-a67fe1ba="" href="/configurarhorario" class="navbar-item is-tab">Configuração dos
                            Horários</a>
                        <a data-v-a67fe1ba="" href="/configurarprato" class="navbar-item is-tab">Configuração dos
                            Preços</a>
                        <a data-v-a67fe1ba="" href="/configurardiaaberto" class="navbar-item is-tab">Configuração do Dia Aberto</a>
                    </div>
                </div>
            {% endif %}
            {% if utilizador.utilizadortipo.tipo == 'Participante em Grupo' or utilizador.utilizadortipo.tipo == 'Participante Individual' or utilizador.utilizadortipo.tipo == 'Coordenador' or utilizador.utilizadortipo.tipo == 'Administrador' %}
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        Inscrição
                    </a>
                    <div class="navbar-dropdown">
                        {% if utilizador.utilizadortipo.tipo == 'Participante em Grupo' or utilizador.utilizadortipo.tipo == 'Participante Individual' %}
                            <a data-v-a67fe1ba="" href="/inscricao/criar" class="navbar-item is-tab router-link">Nova
                                Inscrição</a>
                        {% endif %}
                        <a data-v-a67fe1ba="" href="/inscricao/consultar" class="navbar-item is-tab router-link">Consultar
                            Inscrições</a>
                    </div>
                </div>
            {% endif %}
            {% if utilizador.utilizadortipo.tipo == 'Colaborador' %}
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">Colaborações</a>
                    <div class="navbar-dropdown">
                        <a data-v-a67fe1ba="" href="/colaboradores/criar" class="navbar-item is-tab router-link">Nova
                            Colaboração</a>
                        <a data-v-a67fe1ba="" href="/colaboradores/consultar" class="navbar-item is-tab router-link">Consultar
                            Colaborações</a>
                         <a data-v-a67fe1ba="" href="/colaboradores/consultar_tarefa" class="navbar-item is-tab router-link">Tarefas Atribuidas</a>
                    </div>
                </div>
            {% endif %}
        </div>
        <div class="navbar-end">
            <div data-v-a67fe1ba="" class="navbar-item">
                <div data-v-a67fe1ba="" class="dropdown is-bottom-left is-mobile-modal">
                    <div role="button" aria-haspopup="true" class="dropdown-trigger">
                                <span data-v-a67fe1ba="" role="button">

                                     {% if notificacoes %}
                                         <button data-v-a67fe1ba="" type="button" data-badge=" {{ count_notificacoes }}"
                                                 class="button has-badge-rounded has-badge-warning is-text"
                                                 style="margin-right: 0.9rem;border-color:white">
                                     {% else %}
                                         <button data-v-a67fe1ba="" type="button" class="button"
                                                 style="margin-right: 0.9rem;border-color:white">
                                     {% endif %}
                                    <!---->
                                        <span>
                                            <span data-v-a67fe1ba="" class="icon">
                                                <i class="mdi mdi-bell mdi-24px"></i>
                                            </span>
                                        </span>
                                    <!---->
                                    </button>
                                </span>
                    </div>

                    <div aria-hidden="true" class="dropdown-menu" style="min-width:18rem">
                        <div role="menu" class="dropdown-content">
                            <div data-v-a67fe1ba="" role="menuitem" tabindex="0" class="dropdown-item">


                            <div class="level">
                                <div class="level-left">
                                    <div class="level-item">
                                        <strong data-v-a67fe1ba="">Notificações</strong>
                                    </div>
                                </div>
                                <div class="level-right">
                                    <div class="level-item">
                                        <a href="/notificacao/consultar" style="color:black" class="button is-small"><i class="mdi mdi-email-send-outline"> Enviadas</i><small></small></a>
                                    </div>
                                    <div class="level-item">
                                        <a href="/notificacao/criar" style="color:black" class="button is-small"><i class="mdi mdi-send"></i><small></small></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                            <hr data-v-a67fe1ba="" class="dropdown-divider" style="margin-bottom:0px">
                            <div data-v-a67fe1ba="" style="max-height:260px;overflow-y: scroll;">
                                {% if notificacoes %}
                                    {% for notificacao in notificacoes %}
                                        {% if notificacao.visto == False %}
                                            <div data-v-a67fe1ba="" tabindex="0"
                                                 class="dropdown-item has-background-white-ter"
                                                 style="font-size: 75%;border-bottom: 1px solid #dbdbdb;border-left: 1px solid #f5f5f5;border-right: 1px solid #f5f5f5;">
                                                <div data-v-a67fe1ba=""
                                                     class="has-text-black has-text-left has-text-weight-semibold"> {{ notificacao.assunto }}  </div>
                                                <div data-v-a67fe1ba="" class="is-small has-text-grey has-text-left">
                                                    <small>{{ notificacao.conteudo }} </small></div>
                                                <!--style="overflow: hidden;white-space: nowrap;text-overflow:ellipsis;"-->
                                                <div class="level">
                                                    <div class="level-item"><a href="/notificacao/consultar/recebidas/?notificacaoid={{ notificacao.id }}" class="is-small"><i
                                                            class="mdi mdi-open-in-new mdi-12px"></i></a></div>
                                                    <div class="level-item"><a href="{% url 'visto' notificacao.id %}"
                                                                               class="is-small"><i
                                                            class="mdi mdi-check mdi-12px"></i></a></div>
                                                </div>

                                            </div>

                                        {% else %}
                                            <div data-v-a67fe1ba="" tabindex="0" class="dropdown-item"
                                                 style="font-size: 75%;border-bottom: 1px solid #dbdbdb;border-left: 1px solid #f5f5f5;border-right: 1px solid #f5f5f5;">
                                                <div data-v-a67fe1ba=""
                                                     class="has-text-black"> {{ notificacao.assunto }} </div>
                                                <div data-v-a67fe1ba="" class="is-small has-text-grey has-text-left">
                                                    <small>{{ notificacao.conteudo }} </small></div>
                                                <div class="level">
                                                    <div class="level-item"><a href="/notificacao/consultar/recebidas/?notificacaoid={{ notificacao.id }}" class="is-small"><i
                                                            class="mdi mdi-open-in-new mdi-12px"></i></a></div>
                                                </div>

                                            </div>
                                        {% endif %}

                                    {% endfor %}
                                {% else %}
                                    <div data-v-a67fe1ba="" tabindex="0" class="dropdown-item">
                                        <div data-v-a67fe1ba="" class="has-text-grey"> Não tem novas notificações!</div>
                                    </div>
                                    <hr data-v-a67fe1ba="" class="dropdown-divider">

                                {% endif %}

                            </div>
                            <a href="/notificacao/consultar/recebidas" data-v-a67fe1ba="" tabindex="0" class="dropdown-item">
                                <u data-v-a67fe1ba="">Ver todas as notificações recebidas</u>
                            </a>
                        </div>
                    </div>
                </div>
                <div data-v-a67fe1ba="" class="dropdown is-bottom-left is-mobile-modal">
                    <div role="button" aria-haspopup="true" class="dropdown-trigger">
                        <button data-v-a67fe1ba="" type="button" class="button is-text"
                                style="        margin-right: 0.9rem;">
                            <!---->
                            <span>
                                        <span data-v-a67fe1ba="" class="icon">
                                            <i class="mdi mdi-account-circle mdi-24px"></i>
                                        </span>
                                    </span>
                            <!---->
                        </button>
                    </div>
                    <div class="dropdown-menu" aria-hidden="true">
                        <div role="list" class="dropdown-content">
                            <div data-v-a67fe1ba="" role="listitem" tabindex="0"
                                 class="dropdown-item has-text-centered"><strong>Meu perfil</strong></div>
                            <hr/>
                            {% if user.is_authenticated %}
                                <div data-v-a67fe1ba="" role="listitem" tabindex="0"
                                     class="is-grey dropdown-item has-text-centered">{{ utilizador.nome }}</div>
                                <div data-v-a67fe1ba="" role="listitem" tabindex="0"
                                     class="is-grey dropdown-item">
                                    <small>{{ utilizador.utilizadortipo }}</small></div>
                                {% if utilizador.unidadeorganica and utilizador.departamento %}
                                    <div data-v-a67fe1ba="" role="listitem" tabindex="0" class="is-grey dropdown-item">
                                        <small>{{ utilizador.unidadeorganica }}</small></div>
                                    <div data-v-a67fe1ba="" role="listitem" tabindex="0" class="is-grey dropdown-item">
                                        <small>{{ utilizador.departamento }}</small></div>
                                {% endif %}
                                <hr>
                                <div data-v-a67fe1ba="" role="listitem" tabindex="0" class="dropdown-item">
                                    <small><a href="/utilizadores/password_change">Alterar Password</a></small></div>
                                {% if utilizador.utilizadortipo.tipo == "Administrador" or utilizador.utilizadortipo.tipo == "Coordenador" %}
                                    <div data-v-a67fe1ba="" role="listitem" tabindex="0" class="dropdown-item">
                                        <small><a href="/utilizadores/consultar">Consultar Utilizadores</a></small>
                                    </div>

                                {% endif %}
                            {% else %}
                                <div data-v-a67fe1ba="" role="listitem" tabindex="0"
                                     class="is-grey dropdown-item has-text-centered">Convidado
                                </div>
                                <div data-v-a67fe1ba="" role="listitem" tabindex="0"
                                     class="is-grey dropdown-item has-text-centered"><small>Utilizador Anónimo</small>
                                </div>
                                <hr/>
                            {% endif %}

                        </div>
                    </div>
                </div>
                {% if user.is_authenticated %}
                    <a href="{% url 'logout' %}" data-v-a67fe1ba="" type="button" class="button">
                            <span class="icon is-small">
                                <i class="mdi mdi-logout-variant"></i>
                            </span>
                        <span> Sair </span>
                        <!---->
                    </a>
                {% else %}
                    <a href="{% url 'login' %}" data-v-a67fe1ba="" type="button" class="button">
                            <span class="icon is-small">
                                <i class="mdi mdi-login-variant"></i>
                            </span>
                        <span> Entrar </span>
                        <!---->
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</nav>
